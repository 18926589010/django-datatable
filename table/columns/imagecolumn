__author__ = 'sumreen.azam'
# coding: utf-8
from django.utils.safestring import mark_safe
from django.utils.html import escape
from django.template import Template, Context
from table.columns import Column
from table.utils import Accessor

class ImageColumn(Column):
    def __init__(self, field=None, image_title=None, src=None, *args, **kwargs):
        kwargs["sortable"] = False
        kwargs["searchable"] = False
        self.image_path = field
        self.image_title = image_title
        super(ImageColumn, self).__init__(field= field,*args, **kwargs)
    def render(self, obj):
        """ Render image as HTML output tag <img>.
        """
        self.obj = obj
        #path = self.image_path
        path= Accessor(self.field).resolve(obj)
        if isinstance(self.image_title, Accessor):
            title = self.image_title.resolve(self.obj)
        else:
            title = self.image_title
        template = Template('{%% load static %%}<img width=50px height=40px src="{%% static "%s" %%}"'
                            ' title="%s">' % (path, title))
        return template.render(Context())
